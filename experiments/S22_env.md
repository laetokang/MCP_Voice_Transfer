# 🧪 테스트 환경 상세

Flutter 기반 **MCP 음성 송금 시스템**은 아래와 같은 환경에서 검증 및 테스트되었습니다.

---

## 📱 디바이스 정보

| 항목        | 내용                                    |
| ----------- | --------------------------------------- |
| 디바이스    | Samsung Galaxy S22                      |
| 운영체제    | Android 14                              |
| 프로세서    | Snapdragon 8 Gen 1 (또는 Exynos 2200)   |
| 메모리      | 8GB RAM                                 |
| 저장공간    | 128GB / 256GB                           |
| 마이크      | 고성능 내장 마이크 (노이즈 캔슬링 지원) |
| 테스트 환경 | 실내 조용한 공간                        |

---

## 🎙 마이크 품질

- Galaxy S22는 **고성능 내장 마이크**를 제공하며, **노이즈 억제 기능**이 내장되어 있습니다.
- STT 기능은 **일반 대화 수준의 음량과 명확한 발음**이 확보되면 높은 인식률을 보입니다.
- 주변 소음 환경에서는 **외부 마이크 또는 이어폰 마이크(유선/무선)** 사용을 권장합니다.

---

## ⚙️ Flutter 환경

- **Flutter SDK**: `3.7.0`
- **Dart SDK**: `>=3.0.0`
- **Android SDK**: `API 33 이상` (Android 13/14 대응)

---

## 📶 Android 14 호환성

Android 14의 주요 변경 사항 중 앱 성능 및 네트워크 통신에 영향을 줄 수 있는 요소:

- **네트워크 시간 동기화 강화**
  - SNTP 기반 시간 감지 향상 → 정확한 타임스탬프 필요 기능에 유용
- **Foreground 서비스 제어 강화**
  - `POST_NOTIFICATIONS`, `FOREGROUND_SERVICE_MICROPHONE` 등 권한 별도 명시 필요
- **백그라운드 제한 정책 강화**
  - 장기 실행되는 음성 분석 로직은 **Foreground 처리 필수**

📌 위 변경 사항은 Android 14 기기에서의 앱 안정성 확보를 위해  
`AndroidManifest.xml` 내 **권한 명시**와 **Foreground 처리 설정**이 필요합니다.

---

## 📋 기타 고려사항

- 🔋 **배터리 최적화 우회 설정 필요**
  - STT 장시간 활성 시 성능 저하 방지
- 📶 **Wi-Fi / LTE 환경 안정성 테스트 권장**
- 🎯 **성능 부하 테스트**
  - `STT → NLU → FDS → 인증 → TTS` 연속 처리 시  
    발열 및 병목 현상 여부 확인 필요

---

## 📊 AI 처리 성능 및 온디바이스 추론 환경 (Samsung Galaxy S22 기준)

| 항목                      | 내용                                                                                                            |
| ------------------------- | --------------------------------------------------------------------------------------------------------------- |
| **AI SoC 탑재 여부**      | ✅ 있음 - Snapdragon 8 Gen 1 / Exynos 2200 모두 NPU 탑재 (세대는 1세대 AI 엔진)                                 |
| **온디바이스 추론 속도**  | 🔄 Whisper base 기준 지연시간 약 400~700ms <br> 🔄 TPS: 약 0.7~1.1 <br> 🔥 발열 있음 (5분 이상 사용 시 42~46°C) |
| **TFLite 구동 가능 여부** | ✅ 가능 - `tflite_flutter` 등으로 Flutter에서 실행 가능                                                         |
| **ONNX 구동 가능 여부**   | ✅ 가능 - `onnxruntime-mobile` 또는 `JNI + C++` 방식으로 구동 가능                                              |
| **ggml 구동 가능 여부**   | ⚠️ 가능하나 **지연시간이 더 길어짐**, 작은 모델(whisper tiny/base 등)에 적합                                    |
| **Flutter + JNI 연동**    | ✅ 가능 - `android/app/src/main/cpp`에 CMake 연동 설정 시 문제없이 작동                                         |
| **Flutter + Rust 연동**   | ✅ 가능 - `flutter_rust_bridge`, `uni_ffigen` 등으로 연동 가능                                                  |
| **OS 지원**               | ✅ Android 13 이상 지원 (One UI 6.0까지 공식 지원됨, 일부 기기 Android 14 업그레이드 지원)                      |
| **메모리 8GB 이상 여부**  | ✅ 8GB RAM 탑재 → 일반적인 온디바이스 STT/LLM 추론 가능                                                         |

---

📌 **요약**:

- **S22는 온디바이스 AI 추론이 가능한 수준이지만**, **발열 및 추론 속도 측면에서는 고성능 기기보다 제한적**
- Whisper small/base 모델로 실시간 추론은 가능하지만, **chunk 단위 또는 streaming 시 latency 최적화 필요**
- TFLite, ONNX, ggml 모두 실행 가능하며, **Flutter + JNI 연동도 테스트 및 배포 환경 구축 가능**
- 장시간 사용 시 발열 이슈 주의 + **온디바이스 추론 시 배터리 소모량 고려 필요**
